{"version":3,"sources":["3d/data/main3DViewReducer.ts","gui/guiReducer.ts","rootReducer.ts","store.ts","gui/datGui.ts","IiotAppProviders.tsx","3d/data/main3DViewState.ts","3d/useLoadFloaterModel.ts","3d/data/dimensions.ts","3d/useInitializeMain3DView.ts","useLighting.ts","3d/useClippingPlane.ts","3d/useInitializeObjects.ts","3d/utility/springConfig.ts","3d/Floater.tsx","utility/usePrevious.ts","3d/FloaterContainer.tsx","3d/useFloaterContainerSelected.ts","3d/FloaterString.tsx","3d/Main3DView.tsx","3d/usePointCamera.ts","3d/data/retrieveInstallationStructureThunk.ts","utility/useDatGuiReduxSwitch.ts","3d/Main3DViewContainer.tsx","utility/useSize.ts","overlay/DumbOverlayContainer.tsx","overlay/windows/SelectedInfo.tsx","overlay/windows/InfoPanel.tsx","overlay/windows/TopBar.tsx","overlay/windows/InfoPanelDialog.tsx","overlay/windows/ActionsAlerts.tsx","overlay/Overlay.tsx","gui/GuiWrapper.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["initialMain3DViewState","installationStructure","undefined","selectedFloaterCoordinate","motionEnabled","main3DViewActions","setInstallationStructure","createAction","structure","setSelectedCoordinate","coordinate","selectNextFloater","selectPreviousFloater","clearSelectedCoordinate","updateMotionEnabled","main3DViewReducer","createReducer","handleAction","state","action","payload","nextFloater","previous","coord","x","y","guiActions","setGuiVisible","visible","guiReducer","rootReducer","combineReducers","main3D","gui","store","createStore","composeWithDevTools","applyMiddleware","thunk","DatGuiContext","React","theme","createMuiTheme","palette","primary","main","secondary","IiotContextProviders","props","datGuiRef","useRef","GUI","domElement","parentElement","classList","add","setupDatGui","basename","process","utils","DayjsUtils","ThemeProvider","Provider","value","current","children","_mixers","floaterMesh","gridDimensions","useLoadFloaterModel","useState","floaterModel","setFloaterModel","useContext","Main3DViewContext","useEffect","Promise","all","loadFloaterPanelMesh","loadFloaterPanelTexture","then","floaterTexture","materials","material","name","Error","wrapS","RepeatWrapping","wrapT","color","setHex","emissive","needsUpdate","map","geometry","scale","console","log","loader","FBXLoader","resolve","reject","load","panelLoadResult","traverse","loadedObject","type","textureLoader","TGALoader","texture","DIMENSIONS","useInitializeMain3DView","scene","three","useThree","gl","useClippingPlane","background","THREE","setHSL","fog","hemiLight","groundColor","position","set","dirLight","multiplyScalar","castShadow","shadow","mapSize","width","height","camera","left","right","top","bottom","far","bias","geo","mat","opacity","transparent","selectionMesh","useInitializeObjects","springConfig","mass","tension","friction","sprindDurationConfigWithPeriod","R","period","Math","pow","PI","config","duration","easing","easeQuadInOut","Floater","group","useMemo","newMesh","clone","useSelector","pos","from","motionPeriod","springState","setSpringState","spring","useSpring","previousProps","item","defaultValue","ref","usePrevious","selectionRef","selected","remove","primitive","onClick","object","FloaterContainer","gridPosition","useFloaterContainerSelected","sequenceOfNumbers","setNumber","forEach","index","setTimeout","dispatch","useDispatch","useCallback","FloaterString","floaterProps","xIndex","key","Main3DView","main3DViewState","stateReady","bounding","z","lookAt","Vector3","usePointCamera","retrieveInstallationStructureThunk","makeGuiReduxSwitch","params","currentValue","selector","datGui","guiControlRef","hiddenPropertyObject","_property","this","property","updateAction","elem","guiName","withStyles","makeStyles","mainContainer","zIndex","canvas","useGuiSwitch","Main3DViewContainer","styles","size","_setSize","useSize","setSize","main3DView","className","handleHeight","handleWidth","onResize","Consumer","resize","scroll","DumbOverlayContainer","absoluteRoot","relativeRoot","pointerEvents","floaterId","n","length","Array","join","SelectedInfo","previousFloater","floaterInfo","floaterInfoList","root","titleArea","IconButton","classes","chevron","ChevronLeft","Typography","variant","heading","ChevronRight","grid","status","error","averageProduction","averageTension","averageSunObstruction","messages","message","dayjs","time","format","DIALOGS","padding","contrastText","borderRadius","boxShadow","overflow","textAlign","display","justifyContent","marginLeft","marginTop","marginRight","backgroundColor","boxSizing","gridTemplateColumns","textDecoration","valueOf","TopBar","useStyles","style","src","alt","logoWithText","buttonContainer","Button","button","alignItems","InfoPanelDialog","Dialog","onClose","open","DialogTitle","title","InfoPanel","openDialog","setOpenDialog","BIRD_LASER","POWER_METER","SUN_OBSTRUCTION","WEATHER","MAINTENANCE","ActionsAlerts","selectHF09","selectHF12","selectHF14","dismissedMessages","setDismissedMessages","onClickName","id","content","messageDef","includes","eventRow","inlineText","eventRowLink","cursor","Overlay","guiVisible","GuiWrapper","App","exact","to","path","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.5dc7003e.chunk.js","sourcesContent":["import { ActionType, createAction, createReducer } from \"typesafe-actions\";\nimport { IiotAction } from \"../../rootReducer\";\nimport { InstallationStructure } from \"../utility/installationStructure\";\nimport { TwoDCoord } from \"../../utility/types\";\n\ninterface Main3DViewState {\n  installationStructure: InstallationStructure;\n  selectedFloaterCoordinate: TwoDCoord | null;\n  motionEnabled: boolean;\n}\n\nconst initialMain3DViewState: Main3DViewState = ({\n  installationStructure: undefined,\n  selectedFloaterCoordinate: null,\n  motionEnabled: true\n} as Partial<Main3DViewState>) as Main3DViewState;\n\nexport const main3DViewActions = {\n  setInstallationStructure: createAction(\n    \"SET_INSTALLATION_STRUCTURE\",\n    (structure: InstallationStructure) => ({ structure })\n  )(),\n  setSelectedCoordinate: createAction(\n    \"MAIN_3D_VIEW/SET_SELECTED_FLOATER_COORDINATE\",\n    (coordinate: TwoDCoord) => ({ coordinate })\n  )(),\n  selectNextFloater: createAction(\"MAIN_3D_VIEW/SELECT_NEXT_FLOATER\")(),\n  selectPreviousFloater: createAction(\"MAIN_3D_VIEW/SELECT_PREVIOUS_FLOATER\")(),\n  clearSelectedCoordinate: createAction(\n    \"MAIN_3D_VIEW/CLEAR_SELECTED_FLAOTER_COORDINATE\"\n  )(),\n  updateMotionEnabled: createAction(\n    \"MAIN_3D_VIEW/UPDATE_MOTION_ENABLED\",\n    (motionEnabled: boolean) => ({ motionEnabled })\n  )()\n};\n\nexport type Floaters3DViewAction = ActionType<typeof main3DViewActions>;\n\nexport const main3DViewReducer = createReducer<Main3DViewState, IiotAction>(\n  initialMain3DViewState\n)\n  .handleAction(\n    main3DViewActions.setInstallationStructure,\n    (state, action) => ({\n      ...state,\n      installationStructure: action.payload.structure\n    })\n  )\n  .handleAction(main3DViewActions.setSelectedCoordinate, (state, action) => ({\n    ...state,\n    selectedFloaterCoordinate: action.payload.coordinate\n  }))\n  .handleAction(main3DViewActions.clearSelectedCoordinate, state => ({\n    ...state,\n    selectedFloaterCoordinate: null\n  }))\n  .handleAction(main3DViewActions.selectNextFloater, state => ({\n    ...state,\n    selectedFloaterCoordinate: nextFloater(state.selectedFloaterCoordinate)\n  }))\n  .handleAction(main3DViewActions.selectPreviousFloater, state => ({\n    ...state,\n    selectedFloaterCoordinate: previous(state.selectedFloaterCoordinate)\n  }))\n  .handleAction(main3DViewActions.updateMotionEnabled, (state, action) => ({\n    ...state,\n    motionEnabled: action.payload.motionEnabled\n  }));\n\nfunction nextFloater(coord: TwoDCoord | null) {\n  if (coord === null) {\n    return null;\n  }\n  if (coord.x === 3 && coord.y === 4) {\n    return coord;\n  }\n  if (coord.x < 3) {\n    return { x: coord.x + 1, y: coord.y };\n  } else {\n    return { x: 0, y: coord.y + 1 };\n  }\n}\n\nfunction previous(coord: TwoDCoord | null) {\n  if (coord === null) {\n    return null;\n  }\n  if (coord.x === 0 && coord.y === 0) {\n    return coord;\n  }\n  if (coord.x > 0) {\n    return { x: coord.x - 1, y: coord.y };\n  } else {\n    return { x: 3, y: coord.y - 1 };\n  }\n}\n","import { createAction, createReducer } from \"typesafe-actions\";\nimport { ActionType } from \"typesafe-actions/dist/type-helpers\";\n\nexport const guiActions = {\n  setGuiVisible: createAction(\"GUI/SET_VISIBLE\", (visible: boolean) => ({\n    visible: visible\n  }))()\n};\n\ninterface GuiState {\n  visible: boolean;\n}\n\nexport type GuiAction = ActionType<typeof guiActions>;\n\nexport const guiReducer = createReducer<GuiState, GuiAction>({\n  visible: true\n}).handleAction(guiActions.setGuiVisible, (state, action) => ({\n  ...state,\n  visible: action.payload.visible\n}));\n","import { Floaters3DViewAction, main3DViewReducer } from \"./3d/data/main3DViewReducer\";\nimport { combineReducers } from \"redux\";\nimport { GuiAction, guiReducer } from \"./gui/guiReducer\";\n\nexport const rootReducer = combineReducers({\n  main3D: main3DViewReducer,\n  gui: guiReducer\n});\n\nexport type IiotStoreState = ReturnType<typeof rootReducer>;\n\nexport type IiotAction = Floaters3DViewAction | GuiAction;\n","import { ActionCreator, applyMiddleware, createStore } from \"redux\";\nimport { IiotAction, IiotStoreState, rootReducer } from \"./rootReducer\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk, { ThunkAction, ThunkDispatch } from \"redux-thunk\";\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n\nexport type IiotThunkAction<ReturnType> = ThunkAction<\n  ReturnType,\n  IiotStoreState,\n  any,\n  IiotAction\n>;\n\nexport type IiotThunkActionCreator<ReturnType = void> = ActionCreator<\n  IiotThunkAction<Promise<ReturnType>>\n>;\n\nexport type IiotDispatch = ThunkDispatch<IiotStoreState, any, IiotAction>;\n","import { GUI } from \"dat.gui\";\nimport * as React from \"react\";\n\nexport function setupDatGui() {\n  const gui = new GUI();\n  gui.domElement.parentElement?.classList.add(\"top\");\n  return gui;\n}\n\nexport const DatGuiContext = React.createContext<GUI>(null as any);\n","import * as React from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store\";\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DayjsUtils from \"@date-io/dayjs\";\nimport \"dayjs/locale/nb\";\nimport { createMuiTheme } from \"@material-ui/core\";\nimport ThemeProvider from \"@material-ui/styles/ThemeProvider\";\nimport { useRef } from \"react\";\nimport { setupDatGui, DatGuiContext } from \"./gui/datGui\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: \"#1070E4\" },\n    secondary: { main: \"#FFEA00\" }\n  }\n});\n\nexport const IiotContextProviders: React.FC<{\n  children: React.ReactNode;\n}> = props => {\n  const datGuiRef = useRef(setupDatGui());\n  return (\n    <Provider store={store}>\n      <Router basename={process.env.PUBLIC_URL}>\n        <MuiPickersUtilsProvider utils={DayjsUtils}>\n          <ThemeProvider theme={theme}>\n            <DatGuiContext.Provider value={datGuiRef.current}>\n              {props.children}\n            </DatGuiContext.Provider>\n          </ThemeProvider>\n        </MuiPickersUtilsProvider>\n      </Router>\n    </Provider>\n  );\n};\n","import { AnimationMixer, Mesh } from \"three\";\n\nexport interface Main3DViewState {\n  /**\n   * Mixers to update in animation loop\n   */\n  _mixers: AnimationMixer[];\n  /**\n   * Floater mesh to reuse\n   */\n  floaterMesh: Mesh | undefined;\n  selectionMesh: Mesh | undefined;\n  installationStructure: { x: number; y: number };\n}\n\nexport const initialMain3DViewState: Main3DViewState = {\n  _mixers: [],\n  floaterMesh: undefined,\n  gridDimensions: { x: 0, y: 0 }\n} as any;\n","import { useContext, useEffect, useState } from \"react\";\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader\";\nimport { Mesh, MeshPhongMaterial, RepeatWrapping, Texture } from \"three\";\nimport { TGALoader } from \"three/examples/jsm/loaders/TGALoader\";\nimport { Main3DViewContext } from \"./Main3DView\";\n\n/**\n * What to scale the panel with so that the dimensions are 3x3\n */\nconst SCALE = 3.0 / 225;\n\nexport const useLoadFloaterModel = () => {\n  const [floaterModel, setFloaterModel] = useState<Mesh>();\n  const state = useContext(Main3DViewContext);\n  useEffect(() => {\n    loadFloaterModel().then(floaterMesh => {\n      state.floaterMesh = floaterMesh;\n      setFloaterModel(floaterMesh);\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  return floaterModel;\n};\n\nfunction loadFloaterModel() {\n  return Promise.all([loadFloaterPanelMesh(), loadFloaterPanelTexture()]).then(\n    ([floaterMesh, floaterTexture]: [Mesh, Texture]) => {\n      const materials = floaterMesh.material as [\n        MeshPhongMaterial,\n        MeshPhongMaterial\n      ];\n      if (materials[0].name !== \"Body\" || materials[1].name !== \"Solcelle\") {\n        throw new Error(\"Unexpected loading result wrt materials\");\n      }\n      floaterTexture.wrapS = RepeatWrapping;\n      floaterTexture.wrapT = RepeatWrapping;\n      materials[0].color.setHex(0x2b2d2f);\n      materials[1].color.setHex(0xffffff);\n      materials[1].emissive.setHex(0x000000);\n      materials[1].needsUpdate = true;\n      materials[1].map = floaterTexture;\n      floaterMesh.geometry.scale(SCALE, SCALE, SCALE);\n      console.log(\"‚ÑπÔ∏è\", \"floaterMesh\", floaterMesh);\n      return floaterMesh;\n    }\n  );\n}\n\nfunction loadFloaterPanelMesh() {\n  const loader = new FBXLoader();\n  return new Promise<Mesh>((resolve, reject) => {\n    loader.load(process.env.PUBLIC_URL + \"/res/panel.fbx\", panelLoadResult => {\n      panelLoadResult.traverse(loadedObject => {\n        if (loadedObject.type !== \"Mesh\") {\n          return;\n        }\n        if (loadedObject.name === \"Panel\") {\n          resolve(loadedObject as Mesh);\n        } else {\n          reject(\"Unexpected loading result\");\n        }\n      });\n    });\n  });\n}\n\nfunction loadFloaterPanelTexture() {\n  const textureLoader = new TGALoader();\n  return new Promise<Texture>(resolve => {\n    textureLoader.load(process.env.PUBLIC_URL + \"/res/panel-texture.tga\", texture => {\n      resolve(texture);\n    });\n  });\n}\n","export const DIMENSIONS = {\n  TRAY_WIDTH: 3,\n  TRAY_HEIGHT: 0.1,\n  TRAY_CLEARANCE: 0.2,\n  TRAY_X: 1.5,\n  TRAY_Z: 1.5,\n  BAR_WIDTH: 0.3 / 3,\n  BAR_HEIGHT: 3,\n  BAR_X_OFFSET: 0,\n  BAR_Z_OFFSET: 0,\n  BAR_X_MULTIPLIER: 1,\n  BAR_Z_MULTIPLIER: 1\n};\n","import { useThree } from \"react-three-fiber\";\nimport { useClippingPlane } from \"./useClippingPlane\";\nimport { useLighting } from \"../useLighting\";\nimport { useInitializeObjects } from \"./useInitializeObjects\";\n\nexport const useInitializeMain3DView = () => {\n  const three = useThree();\n  useClippingPlane();\n  useLighting(three.scene);\n  useInitializeObjects();\n};\n","import { Scene } from \"three\";\nimport { useEffect } from \"react\";\nimport * as THREE from \"three\";\n\nexport const useLighting = (scene: Scene) => {\n  useEffect(() => {\n    scene.background = new THREE.Color().setHSL(0.6, 0, 1);\n    scene.fog = new THREE.Fog(scene.background as any, 1, 5000);\n    const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\n    hemiLight.color.setHSL(0.6, 1, 0.6);\n    hemiLight.groundColor.setHSL(0.095, 1, 0.75);\n    hemiLight.position.set(0, 300, 0);\n    scene.add(hemiLight);\n    const dirLight = new THREE.DirectionalLight(0xffffff, 1);\n    dirLight.color.setHSL(0.1, 1, 0.95);\n    dirLight.position.set(-1, 1.75, 1);\n    dirLight.position.multiplyScalar(200);\n    scene.add(dirLight);\n    dirLight.castShadow = true;\n    dirLight.shadow.mapSize.width = 2048;\n    dirLight.shadow.mapSize.height = 2048;\n    var d = 50;\n    dirLight.shadow.camera.left = -d;\n    dirLight.shadow.camera.right = d;\n    dirLight.shadow.camera.top = d;\n    dirLight.shadow.camera.bottom = -d;\n    dirLight.shadow.camera.far = 3500;\n    dirLight.shadow.bias = -0.0001;\n  }, [scene]);\n};\n","import { useThree } from \"react-three-fiber\";\n// import { Plane, Vector3 } from \"three\";\nimport { useEffect } from \"react\";\n\nexport const useClippingPlane = () => {\n  const three = useThree();\n  useEffect(() => {\n    // const clippingPlane = new Plane(new Vector3(0, 1, 0), 0.1);\n    // three.gl.clippingPlanes = [clippingPlane];\n  }, [three.gl]);\n};\n","import { useContext, useEffect } from \"react\";\nimport * as THREE from \"three\";\nimport { Main3DViewContext } from \"./Main3DView\";\n\nexport const useInitializeObjects = () => {\n  const state = useContext(Main3DViewContext);\n  useEffect(() => {\n    const geo = new THREE.BoxGeometry(3.2, 0.3, 3.2);\n    const mat = new THREE.MeshPhongMaterial({\n      color: 0x1070e4,\n      opacity: 0.5,\n      transparent: true\n    });\n    state.selectionMesh = new THREE.Mesh(geo, mat);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n};\n","import * as R from \"ramda\";\n// @ts-ignore\nimport { easeQuadInOut } from \"d3-ease\";\n\nexport const springConfig = { mass: 1, tension: 170, friction: 26 };\nexport const springConfigWithPeriod = R.memoizeWith(\n  R.identity as any,\n  (period: number) => {\n    const tension =\n      (Math.pow(Math.PI, 2) * (springConfig.mass as any)) /\n      Math.pow(period * 3, 2);\n    const config = {\n      ...springConfig,\n      tension,\n      friction: (20 / 17) * tension\n    };\n    console.log(\"üèû\", \"config is\", config);\n    return config;\n  }\n);\nexport const sprindDurationConfigWithPeriod = R.memoizeWith(\n  R.identity as any,\n  (period: number) => {\n    const config = {\n      duration: period * 1000.0,\n      easing: easeQuadInOut\n    };\n    console.log(\"üèû\", \"config is\", config);\n    return config;\n  }\n);\n","import * as React from \"react\";\nimport { useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Main3DViewContext } from \"./Main3DView\";\n// @ts-ignore\nimport { animated, useSpring } from \"react-spring/three\";\nimport { sprindDurationConfigWithPeriod } from \"./utility/springConfig\";\nimport { usePrevious } from \"../utility/usePrevious\";\n// import { usePrevious } from \"../utility/usePrevious\";\nimport * as THREE from \"three\";\nimport { useSelector } from \"react-redux\";\nimport { IiotStoreState } from \"../rootReducer\";\n// import dayjs from 'dayjs';\n\n// let firstPosition: number[] = [-999, -1, -1];\n// // @ts-ignore\n// const logOneFloater = position => (...args) => {\n//   if (firstPosition[0] === -999) {\n//     firstPosition = position;\n//   }\n//   if (firstPosition[0] === position[0] && firstPosition[2] === position[2]) {\n//     console.log(\"ü§£ \", ...args);\n//   }\n// };\n\nexport const Floater: React.FC<{\n  position: [number, number, number];\n  motionPeriod: number;\n  onClick?: () => void;\n  selected: boolean;\n}> = props => {\n  const state = useContext(Main3DViewContext);\n  const group = useMemo(() => {\n    if (state.floaterMesh === undefined) {\n      throw new Error(\"Floater model is not ready\");\n    }\n    const newMesh = state.floaterMesh.clone();\n    const group = new THREE.Group();\n    group.add(newMesh);\n    return group;\n  }, [state.floaterMesh]);\n  const motionEnabled = useSelector(\n    (state: IiotStoreState) => state.main3D.motionEnabled\n  );\n\n  // this hack fixes a problem with \"resetting\" spring\n  // https://github.com/react-spring/react-spring/issues/366#issuecomment-446328238\n  const [springState, setSpringState] = useState({\n    pos: props.position,\n    from: {\n      pos: props.position\n    },\n    config: sprindDurationConfigWithPeriod(props.motionPeriod)\n  });\n  const spring = useSpring({\n    ...springState\n  });\n  const previousProps = usePrevious(props);\n  useEffect(() => {\n    if (motionEnabled) {\n      setSpringState({\n        pos: props.position,\n        from: {\n          pos:\n            previousProps !== undefined\n              ? previousProps.position\n              : props.position\n        },\n        config: sprindDurationConfigWithPeriod(props.motionPeriod)\n      });\n    }\n  }, [props.position, props.motionPeriod]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const selectionRef = useRef<any>();\n  useEffect(() => {\n    if (props.selected) {\n      selectionRef.current = state.selectionMesh;\n      group.add(selectionRef.current);\n    } else {\n      group.remove(selectionRef.current as any);\n    }\n  }, [props.selected, group, state.selectionMesh]);\n\n  return useMemo(\n    () =>\n      group ? (\n        <>\n          <animated.primitive\n            onClick={props.onClick}\n            object={group}\n            position={spring.pos}\n          />\n        </>\n      ) : null,\n    [spring.pos, group, props.onClick]\n  );\n};\n","import { useEffect, useRef } from \"react\";\n\nexport const usePrevious = <T>(item: T, defaultValue: T = undefined as any) => {\n  const ref = useRef<T>(defaultValue);\n  useEffect(() => {\n    ref.current = item;\n  }, [item]);\n  return ref.current;\n};\n","import * as React from \"react\";\nimport { Floater } from \"./Floater\";\nimport { DIMENSIONS } from \"./data/dimensions\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Coords } from \"./utility/coords\";\nimport * as R from \"ramda\";\nimport { useDispatch } from \"react-redux\";\nimport { main3DViewActions } from \"./data/main3DViewReducer\";\nimport { useFloaterContainerSelected } from \"./useFloaterContainerSelected\";\n\nexport const FloaterContainer: React.FC<{\n  gridPosition: { x: number; y: number };\n}> = props => {\n  const selected = useFloaterContainerSelected(props.gridPosition);\n  const position = useMemo<Coords>(\n    () => [\n      DIMENSIONS.TRAY_WIDTH / 2 +\n        props.gridPosition.y *\n          (DIMENSIONS.TRAY_WIDTH + DIMENSIONS.TRAY_CLEARANCE),\n      0,\n      DIMENSIONS.TRAY_WIDTH / 2 +\n        props.gridPosition.x *\n          (DIMENSIONS.TRAY_WIDTH + DIMENSIONS.TRAY_CLEARANCE)\n    ],\n    [props.gridPosition]\n  );\n  const [sequenceOfNumbers, setNumber] = useState(0);\n  useEffect(() => {\n    R.pipe(\n      R.map(() => [4, 0, 3, 0]),\n      R.unnest\n    )(R.range(0, 100)).forEach((value, index) => {\n      setTimeout(() => {\n        setNumber(value);\n      }, index * 3000);\n    });\n  }, []);\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => {\n    return dispatch(\n      main3DViewActions.setSelectedCoordinate(props.gridPosition)\n    );\n  }, [dispatch, props.gridPosition]);\n  // const delay = useMemo(\n  //   () =>\n  //     200 * (state.installationStructure.x - props.gridPosition.x) +\n  //     300 * (state.installationStructure.y - props.gridPosition.y),\n  //   []\n  // );\n  return (\n    <>\n      <Floater\n        onClick={onClick}\n        position={useMemo(() => [position[0], sequenceOfNumbers, position[2]], [\n          sequenceOfNumbers,\n          position\n        ])}\n        motionPeriod={3}\n        selected={selected}\n      />\n    </>\n  );\n};\n","import { TwoDCoord } from \"../utility/types\";\nimport { useSelector } from \"react-redux\";\nimport { IiotStoreState } from \"../rootReducer\";\n\nexport const useFloaterContainerSelected = (gridPosition: TwoDCoord) => {\n  const selectedFloaterCoordinate = useSelector(\n    (state: IiotStoreState) => state.main3D.selectedFloaterCoordinate\n  );\n  return (\n    selectedFloaterCoordinate?.x === gridPosition?.x &&\n    selectedFloaterCoordinate?.y === gridPosition?.y\n  );\n};\n","import * as React from \"react\";\nimport { FloaterContainer } from \"./FloaterContainer\";\nimport * as R from \"ramda\";\nimport { Main3DViewContext } from \"./Main3DView\";\nimport { useContext, useMemo } from \"react\";\n\nexport const FloaterString: React.FC<{\n  index: number;\n}> = props => {\n  const state = useContext(Main3DViewContext);\n  const floaterProps = useMemo(\n    () =>\n      R.range(0, state.installationStructure.x).map(xIndex => {\n        return {\n          key: `${xIndex}_${props.index}`,\n          gridPosition: { x: xIndex, y: props.index }\n        };\n      }),\n    [state.installationStructure, props.index]\n  );\n  return (\n    <>\n      {floaterProps.map(props => {\n        return <FloaterContainer {...props} />;\n      })}\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { initialMain3DViewState } from \"./data/main3DViewState\";\nimport { Size } from \"../utility/useSize\";\nimport * as R from \"ramda\";\nimport { useLoadFloaterModel } from \"./useLoadFloaterModel\";\nimport { usePointCamera } from \"./usePointCamera\";\nimport { useInitializeMain3DView } from \"./useInitializeMain3DView\";\nimport { IiotStoreState } from \"../rootReducer\";\nimport { FloaterString } from \"./FloaterString\";\nimport { useEffect } from \"react\";\n\nexport const Main3DViewContext = React.createContext(initialMain3DViewState);\n\nexport const Main3DView: React.FC<{\n  size: Size;\n  main3D: IiotStoreState[\"main3D\"];\n}> = props => {\n  console.log(\"Main3DViewScene render\");\n  const main3DViewState = initialMain3DViewState;\n  const floaterModel = useLoadFloaterModel();\n  const stateReady = main3DViewState.selectionMesh !== undefined && floaterModel;\n  useInitializeMain3DView();\n  usePointCamera(props.main3D.installationStructure);\n  useEffect(() => {\n    main3DViewState.installationStructure = props.main3D.installationStructure;\n  }, [props.main3D, main3DViewState]);\n  return (\n    <Main3DViewContext.Provider value={main3DViewState}>\n      {stateReady &&\n        main3DViewState.selectionMesh !== undefined &&\n        props.main3D.installationStructure &&\n        R.range(0, props.main3D.installationStructure.y).map(index => (\n          <FloaterString index={index} key={index} />\n        ))}\n    </Main3DViewContext.Provider>\n  );\n};\n","import { useEffect, useMemo } from \"react\";\nimport { DIMENSIONS } from \"./data/dimensions\";\nimport { PerspectiveCamera, Vector3 } from \"three\";\nimport { useThree } from \"react-three-fiber\";\nimport { InstallationStructure } from \"./utility/installationStructure\";\n\nexport const usePointCamera = (\n  installationStructure: InstallationStructure\n) => {\n  const three = useThree();\n  const bounding = useMemo(\n    () => [\n      DIMENSIONS.TRAY_WIDTH +\n        (installationStructure.y - 1) *\n          (DIMENSIONS.TRAY_WIDTH + DIMENSIONS.TRAY_CLEARANCE),\n      0,\n      DIMENSIONS.TRAY_WIDTH +\n        (installationStructure.x - 1) *\n          (DIMENSIONS.TRAY_WIDTH + DIMENSIONS.TRAY_CLEARANCE)\n    ],\n    [installationStructure.y, installationStructure.x]\n  );\n  useEffect(() => {\n    const camera: PerspectiveCamera = three.camera as PerspectiveCamera;\n    // const distance = bounding[0] / 2 / Math.tan(75 / 2 / (180 / Math.PI));\n    // camera.position.z = bounding[2] * (installationStructure.x > 4 ? 1.2 : 1);\n    camera.position.x = 10;\n    camera.position.y = 15;\n    camera.position.z = 24;\n    // camera.position.y = distance;\n    // camera.position.z = camera.position.z + 6;\n    // camera.position.y = camera.position.y + 2;\n    // camera.position.x = bounding[0] / 2;\n    camera.lookAt(new Vector3(bounding[0] / 2, 0, bounding[2] / 3 + 4));\n    // camera.lookAt(0, 0,0);\n    console.log(\"üì∑\", \"position\", camera.position, \"where to point\", bounding);\n  }, [bounding, three.camera, installationStructure]);\n};\n","import { IiotThunkActionCreator } from \"../../store\";\nimport { main3DViewActions } from \"./main3DViewReducer\";\nimport { InstallationStructure } from \"../utility/installationStructure\";\n\nfunction fetchInstallationStructure(): Promise<InstallationStructure> {\n  // return fetch(`api/installation-structure`).then(data => data.json());\n  return Promise.resolve({ x: 12, y: 12 });\n}\n\nexport const retrieveInstallationStructureThunk: IiotThunkActionCreator = () => dispatch => {\n  return fetchInstallationStructure().then(structure => {\n    dispatch(main3DViewActions.setInstallationStructure(structure));\n  });\n};\n","import { IiotStoreState } from \"../rootReducer\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useContext, useEffect, useMemo, useRef } from \"react\";\nimport { DatGuiContext } from \"../gui/datGui\";\nimport { GUIController } from 'dat.gui';\n\ninterface Params<T> {\n  updateAction: (value: T) => void;\n  selector: (state: IiotStoreState) => T;\n  guiName: string;\n}\n\nexport const makeGuiReduxSwitch = <T>(params: Params<T>) => () => {\n  const dispatch = useDispatch();\n  const currentValue = useSelector(params.selector);\n  const datGui = useContext(DatGuiContext);\n  const guiControlRef = useRef<GUIController>();\n\n  const hiddenPropertyObject = useMemo(() => {\n    return {\n      _property: currentValue,\n      get property() {\n        return this._property;\n      },\n      set property(property: T) {\n        dispatch(params.updateAction(property));\n        this._property = property;\n      }\n    };\n  }, [dispatch]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    const elem = datGui.add(hiddenPropertyObject, \"property\");\n    elem.name(params.guiName);\n    guiControlRef.current = elem;\n    return () => datGui.remove(elem);\n  }, [hiddenPropertyObject, datGui]);\n};\n","import * as React from \"react\";\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport { useSize } from \"../utility/useSize\";\nimport { useEffect } from \"react\";\nimport { IiotStoreState } from \"../rootReducer\";\nimport {\n  useDispatch,\n  useSelector,\n  ReactReduxContext,\n  Provider\n} from \"react-redux\";\nimport { Canvas } from \"react-three-fiber\";\nimport { Main3DView } from \"./Main3DView\";\nimport { retrieveInstallationStructureThunk } from \"./data/retrieveInstallationStructureThunk\";\nimport { makeGuiReduxSwitch } from '../utility/useDatGuiReduxSwitch';\nimport { main3DViewActions } from './data/main3DViewReducer';\n\nconst withStyles = makeStyles((theme: Theme) => ({\n  mainContainer: {\n    position: \"absolute\",\n    top: \"0\",\n    zIndex: 1,\n    left: \"0\",\n    width: \"100vw\",\n    height: \"100vh\"\n  },\n  canvas: {}\n}));\n\nconst useGuiSwitch = makeGuiReduxSwitch({\n  guiName: \"Motion enabled\",\n  selector: (state: IiotStoreState) => state.main3D.motionEnabled,\n  updateAction: main3DViewActions.updateMotionEnabled,\n});\n\nexport const Main3DViewContainer: React.FC = () => {\n  const styles = withStyles();\n  const [size, setSize] = useSize();\n  const main3DView = useSelector((state: IiotStoreState) => state.main3D);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(retrieveInstallationStructureThunk());\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  useGuiSwitch();\n\n  return (\n    <div className={styles.mainContainer}>\n      <ReactResizeDetector handleHeight handleWidth onResize={setSize} />\n      {/*Hack to fix some bug that destroys context*/}\n      {/*https://github.com/react-spring/react-three-fiber/issues/43#issuecomment-476073615*/}\n      <ReactReduxContext.Consumer>\n        {({ store }) => (\n          <Canvas className={styles.canvas} resize={{ scroll: false }}>\n            <Provider store={store}>\n              {main3DView.installationStructure && (\n                <Main3DView size={size} main3D={main3DView} />\n              )}\n            </Provider>\n          </Canvas>\n        )}\n      </ReactReduxContext.Consumer>\n    </div>\n  );\n};\n","import { useCallback, useState } from \"react\";\n\nexport interface Size {\n  x: number;\n  y: number;\n}\n\n/**\n * state for ReactResizeDetector\n *\n * @example\n * const [size, setSize] = useSize();\n * ...\n * <ReactResizeDetector  onResize={setSize}\n *   handleHeight handleWidth\n * />\n *\n */\nexport const useSize = () => {\n  const [size, _setSize] = useState<Size>({ x: 0, y: 0 });\n  const setSize = useCallback(\n    (x, y) => {\n      _setSize({ x, y });\n    },\n    [_setSize]\n  );\n  return [size, setSize] as [Size, (width: number, height: number) => void];\n};\n","import * as React from \"react\";\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\n\nexport const DumbOverlayContainer: React.FC<{\n  children: React.ReactNode;\n}> = props => {\n  const styles = withStyles();\n\n  return (\n    <div className={styles.absoluteRoot}>\n      <div className={styles.relativeRoot}>{props.children}</div>\n    </div>\n  );\n};\n\nconst withStyles = makeStyles((theme: Theme) => ({\n  absoluteRoot: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    height: \"100vh\",\n    width: \"100vw\"\n  },\n  relativeRoot: {\n    position: \"relative\",\n    height: \"100vh\",\n    width: \"100vw\",\n    zIndex: 2,\n    pointerEvents: 'none',\n  }\n}));\n","import * as React from \"react\";\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { IiotStoreState } from \"../../rootReducer\";\nimport { TwoDCoord } from \"../../utility/types\";\nimport { IconButton, Typography } from \"@material-ui/core\";\nimport { ChevronLeft, ChevronRight } from \"@material-ui/icons\";\nimport { useCallback, useMemo } from \"react\";\nimport { main3DViewActions } from \"../../3d/data/main3DViewReducer\";\nimport dayjs from \"dayjs\";\n\n// @ts-ignore\nfunction pad(n, width) {\n  n = n + \"\";\n  return n.length >= width ? n : new Array(width - n.length + 1).join(\"0\") + n;\n}\nfunction floaterId(position: TwoDCoord) {\n  return `HF${pad(position.y * 4 + position.x, 2)}`;\n}\n\nexport const SelectedInfo = () => {\n  const dispatch = useDispatch();\n  const nextFloater = useCallback(\n    () => dispatch(main3DViewActions.selectNextFloater()),\n    [dispatch]\n  );\n  const previousFloater = useCallback(\n    () => dispatch(main3DViewActions.selectPreviousFloater()),\n    [dispatch]\n  );\n  const selectedFloaterCoordinate = useSelector(\n    (state: IiotStoreState) => state.main3D.selectedFloaterCoordinate\n  );\n  const styles = withStyles();\n  const floaterInfo: FloaterInfo = useMemo(() => {\n    if (selectedFloaterCoordinate === null) {\n      return null as any;\n    }\n    return getFloaterInfo(selectedFloaterCoordinate);\n  }, [selectedFloaterCoordinate]);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.titleArea}>\n        {selectedFloaterCoordinate !== null && (\n          <IconButton\n            classes={{ root: styles.chevron }}\n            onClick={previousFloater}\n          >\n            <ChevronLeft />\n          </IconButton>\n        )}\n        <Typography variant={\"h4\"} classes={{ root: styles.heading }}>\n          {selectedFloaterCoordinate !== null\n            ? `Floater ${floaterId(selectedFloaterCoordinate)}`\n            : \"Select a floater...\"}\n        </Typography>\n        {selectedFloaterCoordinate !== null && (\n          <IconButton classes={{ root: styles.chevron }} onClick={nextFloater}>\n            <ChevronRight />\n          </IconButton>\n        )}\n      </div>\n      {selectedFloaterCoordinate !== null && (\n        <div className={styles.grid}>\n          <Typography variant={\"subtitle1\"}>Position</Typography>\n          <Typography variant={\"body1\"}>\n            {`Column ${selectedFloaterCoordinate?.y} Row ${selectedFloaterCoordinate?.x}`}\n          </Typography>\n          <Typography variant={\"subtitle1\"}>Status</Typography>\n          <Typography\n            variant={\"body1\"}\n            className={\n              floaterInfo.status === \"End of life approaches\"\n                ? styles.error\n                : \"\"\n            }\n          >\n            {floaterInfo.status}\n          </Typography>\n\n          <Typography variant={\"subtitle1\"}>Avg production [W]</Typography>\n          <Typography variant={\"body1\"}>\n            {floaterInfo.averageProduction}\n          </Typography>\n\n          <Typography variant={\"subtitle1\"}>Avg tension [Nm]</Typography>\n          <Typography variant={\"body1\"}>\n            {floaterInfo.averageTension}\n          </Typography>\n\n          <Typography variant={\"subtitle1\"}>Avg sun obstruction [%]</Typography>\n          <Typography variant={\"body1\"}>\n            {floaterInfo.averageSunObstruction}\n          </Typography>\n\n          <Typography variant={\"subtitle1\"}>Messages</Typography>\n          <div>\n            {floaterInfo.messages.map(message => (\n              <Typography variant={\"body1\"}>\n                {`${dayjs(message.time).format(\"YYYY-MM-DD HH:MM\")} ${\n                  message.message\n                }`}\n              </Typography>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction getFloaterInfo(coord: TwoDCoord) {\n  return floaterInfoList[(coord.y * 4 + coord.x) % 5];\n}\n\nconst withStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    width: \"600px\",\n    height: \"275px\",\n    // todo delete\n    padding: \"16px\",\n    pointerEvents: \"all\",\n    background: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    borderRadius: \"4px\",\n    boxShadow:\n      \"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)\",\n    overflow: 'hidden',\n  },\n  heading: {\n    textAlign: \"center\"\n  },\n  titleArea: {\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    marginLeft: \"-16px\",\n    marginTop: \"-16px\",\n    marginRight: \"-16px\",\n    padding: \"16px\",\n    backgroundColor: theme.palette.secondary.main,\n    color: theme.palette.secondary.contrastText,\n    boxSizing: 'border-box',\n    height: \"73px\",\n  },\n  chevron: {\n    color: theme.palette.secondary.contrastText\n  },\n  grid: {\n    display: \"grid\",\n    gridTemplateColumns: \"1fr 2fr\",\n    marginTop: \"20px\",\n    marginLeft: \"50px\"\n  },\n  error: {\n    textDecoration: \"overline underline\"\n  }\n}));\n\ninterface FloaterInfo {\n  status: \"Good\" | \"End of life approaches\";\n  messages: { time: number; message: string }[];\n  averageProduction: number;\n  averageSunObstruction: number;\n  averageTension: number;\n}\n\nconst floaterInfoList: FloaterInfo[] = [\n  {\n    status: \"Good\",\n    averageProduction: 200,\n    averageSunObstruction: 15,\n    averageTension: 9.6,\n    messages: [\n      {\n        time: dayjs(\"2020-06-22 18:12\").valueOf(),\n        message: \"45% obstruction for over 2 hours\"\n      },\n      {\n        time: dayjs(\"2020-06-22 19:02\").valueOf(),\n        message: \"Obstruction is at 0%\"\n      }\n    ]\n  },\n  {\n    status: \"Good\",\n    averageProduction: 196,\n    averageSunObstruction: 8,\n    averageTension: 10.4,\n    messages: []\n  },\n  {\n    status: \"Good\",\n    averageProduction: 186,\n    averageSunObstruction: 6,\n    averageTension: 11.2,\n    messages: [\n      {\n        time: dayjs(\"2020-06-23 19:02\").valueOf(),\n        message: \"Tension is high [12.8N/m], consider maintenance\"\n      }\n    ]\n  },\n  {\n    status: \"Good\",\n    averageProduction: 186,\n    averageSunObstruction: 7,\n    averageTension: 11.2,\n    messages: []\n  },\n  {\n    status: \"End of life approaches\",\n    averageProduction: 166,\n    averageSunObstruction: 14,\n    averageTension: 12.2,\n    messages: []\n  }\n];\n","import * as React from \"react\";\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { IconButton } from \"@material-ui/core\";\nimport { InfoPanelDialog } from \"./InfoPanelDialog\";\nimport { useCallback, useState } from \"react\";\n\nenum DIALOGS {\n  BIRD_LASER,\n  POWER_METER,\n  SUN_OBSTRUCTION,\n  WEATHER,\n  MAINTENANCE\n}\n\nexport const InfoPanel: React.FC<{}> = () => {\n  const [openDialog, setOpenDialog] = useState<number | undefined>(undefined);\n  const styles = useStyles();\n  return (\n    <>\n      <div className={styles.root}>\n        <IconButton\n          classes={{ root: \"x\" }}\n          onClick={useCallback(() => setOpenDialog(DIALOGS.BIRD_LASER), [\n            setOpenDialog\n          ])}\n        >\n          <img\n            src={process.env.PUBLIC_URL + \"/info-panel/bird-with-laser.png\"}\n            alt={\"Bird laser\"}\n          />\n        </IconButton>\n        <IconButton\n          classes={{ root: \"x\" }}\n          onClick={useCallback(() => setOpenDialog(DIALOGS.POWER_METER), [\n            setOpenDialog\n          ])}\n        >\n          <img\n            src={process.env.PUBLIC_URL + \"/info-panel/power-meter.png\"}\n            alt={\"Power meter\"}\n          />\n        </IconButton>\n        <IconButton\n          classes={{ root: \"x\" }}\n          onClick={useCallback(() => setOpenDialog(DIALOGS.SUN_OBSTRUCTION), [\n            setOpenDialog\n          ])}\n        >\n          <img\n            src={process.env.PUBLIC_URL + \"/info-panel/cell-cover.png\"}\n            alt={\"Sun obstructions\"}\n          />\n        </IconButton>\n        <IconButton\n          classes={{ root: \"x\" }}\n          onClick={useCallback(() => setOpenDialog(DIALOGS.WEATHER), [\n            setOpenDialog\n          ])}\n        >\n          <img\n            src={process.env.PUBLIC_URL + \"/info-panel/weather.png\"}\n            alt={\"Weather\"}\n          />\n        </IconButton>\n        <IconButton\n          classes={{ root: \"x\" }}\n          onClick={useCallback(() => setOpenDialog(DIALOGS.MAINTENANCE), [\n            setOpenDialog\n          ])}\n        >\n          <img\n            src={process.env.PUBLIC_URL + \"/info-panel/cleaning.png\"}\n            alt={\"Maintenance schedule\"}\n          />\n        </IconButton>\n      </div>\n      <InfoPanelDialog\n        open={openDialog === DIALOGS.BIRD_LASER}\n        onClose={useCallback(() => setOpenDialog(undefined), [setOpenDialog])}\n        title={\"Bird Laser\"}\n      >\n        <img\n          src={process.env.PUBLIC_URL + \"/res/corssed_square.png\"}\n          alt={\"placeholder element\"}\n        />\n      </InfoPanelDialog>\n      <InfoPanelDialog\n        open={openDialog === DIALOGS.POWER_METER}\n        onClose={useCallback(() => setOpenDialog(undefined), [setOpenDialog])}\n        title={\"Power Meter\"}\n      >\n        <img\n          src={process.env.PUBLIC_URL + \"/res/corssed_square.png\"}\n          alt={\"placeholder element\"}\n        />\n      </InfoPanelDialog>\n      <InfoPanelDialog\n        open={openDialog === DIALOGS.SUN_OBSTRUCTION}\n        onClose={useCallback(() => setOpenDialog(undefined), [setOpenDialog])}\n        title={\"Sun obstruction\"}\n      >\n        <img\n          src={process.env.PUBLIC_URL + \"/res/corssed_square.png\"}\n          alt={\"placeholder element\"}\n        />\n      </InfoPanelDialog>\n      <InfoPanelDialog\n        open={openDialog === DIALOGS.WEATHER}\n        onClose={useCallback(() => setOpenDialog(undefined), [setOpenDialog])}\n        title={\"Weather\"}\n      >\n        <img\n          src={process.env.PUBLIC_URL + \"/res/corssed_square.png\"}\n          alt={\"placeholder element\"}\n        />\n      </InfoPanelDialog>\n      <InfoPanelDialog\n        open={openDialog === DIALOGS.MAINTENANCE}\n        onClose={useCallback(() => setOpenDialog(undefined), [setOpenDialog])}\n        title={\"Maintenance\"}\n      >\n        <img\n          src={process.env.PUBLIC_URL + \"/res/corssed_square.png\"}\n          alt={\"placeholder element\"}\n        />\n      </InfoPanelDialog>\n    </>\n  );\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: \"absolute\",\n    top: \"116px\",\n    left: 0,\n    width: \"100px\",\n    height: \"450px\",\n    pointerEvents: \"all\",\n    background: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    boxShadow:\n      \"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)\",\n    borderRadius: \"4px\"\n  }\n}));\n","import * as React from \"react\";\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Button } from \"@material-ui/core\";\n\nexport const TopBar: React.FC<{}> = () => {\n  const styles = useStyles();\n  return (\n    <div className={styles.root}>\n      <div style={{ width: \"160px\" }} />\n      <div className={styles.heading}>\n        <img\n          src={process.env.PUBLIC_URL + \"/info-panel/logo-with-title.png\"}\n          alt={\"Sunlit Sea\"}\n          className={styles.logoWithText}\n        />\n      </div>\n      <div className={styles.buttonContainer}>\n        <Button\n          classes={{ root: styles.button }}\n          variant={\"contained\"}\n          color={\"secondary\"}\n        >\n          Help\n        </Button>\n        <Button\n          classes={{ root: styles.button }}\n          variant={\"contained\"}\n          color={\"secondary\"}\n        >\n          Menu\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    width: \"100vw\",\n    height: \"56px\",\n    pointerEvents: \"all\",\n    background: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    boxShadow:\n      \"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)\"\n  },\n  buttonContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    height: \"100%\"\n  },\n  button: {\n    marginRight: \"10px\"\n  },\n  heading: {},\n  logoWithText: {\n    height: \"56px\"\n  }\n}));\n","import * as React from \"react\";\nimport { Dialog, DialogTitle } from \"@material-ui/core\";\n\nexport const InfoPanelDialog: React.FC<{\n  open: boolean;\n  onClose(): void;\n  title: string;\n  children: React.ReactNode;\n}> = props => {\n  return (\n    <Dialog onClose={props.onClose} open={props.open}>\n      <DialogTitle>{props.title}</DialogTitle>\n      {props.children}\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Typography } from \"@material-ui/core\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { main3DViewActions } from \"../../3d/data/main3DViewReducer\";\nimport { useDispatch } from \"react-redux\";\n\nexport const ActionsAlerts: React.FC<{}> = () => {\n  const styles = withStyles();\n  const dispatch = useDispatch();\n  const selectHF09 = useCallback(\n    () => dispatch(main3DViewActions.setSelectedCoordinate({ x: 1, y: 2 })),\n    [dispatch]\n  );\n  const selectHF12 = useCallback(\n    () => dispatch(main3DViewActions.setSelectedCoordinate({ x: 0, y: 3 })),\n    [dispatch]\n  );\n  const selectHF14 = useCallback(\n    () => dispatch(main3DViewActions.setSelectedCoordinate({ x: 2, y: 3 })),\n    [dispatch]\n  );\n\n  const [dismissedMessages, setDismissedMessages] = useState<number[]>([]);\n\n  const messages: {\n    message: string;\n    id: number;\n    onClick(): void;\n    onClickName: string;\n  }[] = useMemo(\n    () => [\n      {\n        message: \"High tension detected in HF12\",\n        onClickName: \"view HF12\",\n        onClick: selectHF12,\n        id: 0\n      },\n      {\n        message: \"Floater HF09 approaches end of life\",\n        onClickName: \"view HF09\",\n        onClick: selectHF09,\n        id: 1\n      },\n      {\n        message: \"Floater HF14 approaches end of life\",\n        onClickName: \"view HF14\",\n        onClick: selectHF14,\n        id: 2\n      },\n    ],\n    [selectHF12, selectHF09, selectHF14]\n  );\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.titleArea}>\n        <Typography variant={\"h4\"} classes={{ root: styles.heading }}>\n          Actions / Alerts\n        </Typography>\n      </div>\n      <div className={styles.content}>\n        {messages.map(messageDef =>\n          dismissedMessages.includes(messageDef.id) ? null : (\n            <div className={styles.eventRow} key={messageDef.id}>\n              <Typography\n                variant={\"body1\"}\n                classes={{ root: styles.inlineText }}\n              >\n                {messageDef.message}\n              </Typography>\n              <Typography\n                variant={\"body1\"}\n                classes={{ root: styles.eventRowLink }}\n                onClick={messageDef.onClick}\n              >\n                {messageDef.onClickName}\n              </Typography>\n              <Typography\n                variant={\"body1\"}\n                classes={{ root: styles.eventRowLink }}\n                onClick={() =>\n                  setDismissedMessages([...dismissedMessages, messageDef.id])\n                }\n              >\n                dismiss\n              </Typography>\n            </div>\n          )\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst withStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: \"absolute\",\n    bottom: 0,\n    right: 0,\n    width: \"600px\",\n    height: \"275px\",\n    // todo delete\n    padding: \"16px\",\n    pointerEvents: \"all\",\n    background: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    borderRadius: \"4px\",\n    boxShadow:\n      \"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)\",\n\n    overflow: 'hidden',\n  },\n  heading: {\n    textAlign: \"center\"\n  },\n  titleArea: {\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    marginLeft: \"-16px\",\n    marginTop: \"-16px\",\n    marginRight: \"-16px\",\n    padding: \"16px\",\n    backgroundColor: theme.palette.secondary.main,\n    color: theme.palette.secondary.contrastText,\n    boxSizing: 'border-box',\n    height: \"73px\",\n  },\n  content: {\n    marginTop: \"20px\",\n    marginLeft: \"50px\"\n  },\n  inlineText: {\n    display: \"inline\"\n  },\n  eventRowLink: {\n    textDecoration: \"underline\",\n    cursor: \"pointer\",\n    marginLeft: \"16px\"\n  },\n  eventRow: {\n    display: \"flex\"\n  }\n  // grid: {\n  //   display: \"grid\",\n  //   gridTemplateColumns: \"1fr 2fr\",\n  //   marginTop: \"20px\",\n  //   marginLeft: \"50px\"\n  // },\n  // error: {\n  //   textDecoration: \"overline underline\"\n  // }\n}));\n","import * as React from \"react\";\nimport { DumbOverlayContainer } from \"./DumbOverlayContainer\";\nimport { SelectedInfo } from \"./windows/SelectedInfo\";\nimport { TopBar } from \"./windows/TopBar\";\nimport { InfoPanel } from \"./windows/InfoPanel\";\nimport { ActionsAlerts } from \"./windows/ActionsAlerts\";\nimport { IiotStoreState } from \"../rootReducer\";\nimport { useSelector } from \"react-redux\";\n\nexport const Overlay: React.FC = () => {\n  const guiVisible = useSelector((state: IiotStoreState) => state.gui.visible);\n  return (\n    <>\n      {guiVisible && (\n        <DumbOverlayContainer>\n          <InfoPanel />\n          <TopBar />\n          <SelectedInfo />\n          <ActionsAlerts />\n        </DumbOverlayContainer>\n      )}\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { makeGuiReduxSwitch } from \"../utility/useDatGuiReduxSwitch\";\nimport { IiotStoreState } from \"../rootReducer\";\nimport { guiActions } from \"./guiReducer\";\n\nconst useGuiSwitch = makeGuiReduxSwitch({\n  guiName: \"GUI visible\",\n  selector: (state: IiotStoreState) => state.gui.visible,\n  updateAction: guiActions.setGuiVisible\n});\n\nexport const GuiWrapper: React.FC<{ children: React.ReactNode }> = props => {\n  useGuiSwitch();\n  return <>{props.children}</>;\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport { IiotContextProviders } from \"./IiotAppProviders\";\nimport { Main3DViewContainer } from \"./3d/Main3DViewContainer\";\nimport { Overlay } from \"./overlay/Overlay\";\nimport { GuiWrapper } from \"./gui/GuiWrapper\";\n\nfunction App() {\n  return (\n    <IiotContextProviders>\n      <GuiWrapper>\n        <Switch>\n          <Redirect exact from=\"/\" to={\"/dash\"} />\n          <Route path=\"/dash\">\n            <Main3DViewContainer />\n            <Overlay />\n          </Route>\n        </Switch>\n      </GuiWrapper>\n    </IiotContextProviders>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}